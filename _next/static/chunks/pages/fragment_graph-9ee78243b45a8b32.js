(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[763],{94469:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fragment_graph",function(){return r(84240)}])},53911:function(t,e,r){"use strict";r.d(e,{A8:function(){return l},AJ:function(){return s},Sx:function(){return o},jI:function(){return i}});var n=r(6162),a=r.n(n);function l(t,e,r){let n=function(t){let e=new Map;for(let r of t)e.set(r.id,r);let r=new Map,n=new Map,a=t=>{let l=n.get(t);if(void 0!==l)return l;let o={nextNodes:[]},s=e.get(t);if(void 0===s)throw Error("no such id ".concat(t));for(let t of s.parentIds)a(t).nextNodes.push(o);return n.set(t,o),r.set(o,t),o};for(let e of t)a(e.id);let l=new Map,o=[];for(let t of r.keys())o.push(t);for(let t of function(t){let e=[],r=[],n=new Map,a=t=>{if(t.temp)throw Error("This is not a DAG");if(!t.perm){t.temp=!0;let r=-1;for(let e of t.node.nextNodes){n.get(e).isInput=!1,t.isOutput=!1;let l=a(n.get(e));l>r&&(r=l)}t.temp=!1,t.perm=!0,t.g=r+1,e.unshift(t.node)}return t.g};for(let e of t){let t={node:e,temp:!1,perm:!1,isInput:!0,isOutput:!0,g:0};n.set(e,t),r.push(t)}let l=0;for(let t of r){let e=a(t);e>l&&(l=e)}for(let t of r)t.g=l-t.g;let o=[];for(let t=0;t<l+1;++t)o.push({nodes:[],occupyRow:new Set});let s=new Map,i=new Map;for(let t of r)o[t.g].nodes.push(t.node),s.set(t.node,t.g);let c=(t,e)=>{i.set(t,e),o[s.get(t)].occupyRow.add(e)},d=(t,e,r)=>{for(let n=t;n<=e;++n)o[n].occupyRow.add(r)},u=(t,e)=>o[t].occupyRow.has(e),f=(t,e,r)=>{if(r<0)return!1;for(let n=t;n<=e;++n)if(u(n,r))return!0;return!1};for(let e of t)e.nextNodes.sort((t,e)=>s.get(e)-s.get(t));for(let t of o)for(let e of t.nodes){if(!i.has(e)){for(let t of e.nextNodes){if(i.has(t))continue;let r=-1;for(;f(s.get(e),s.get(t),++r););c(e,r),c(t,r),d(s.get(e)+1,s.get(t)-1,r);break}if(!i.has(e)){let t=-1;for(;u(s.get(e),++t););c(e,t)}}for(let t of e.nextNodes){if(i.has(t))continue;let r=i.get(e);if(!f(s.get(e)+1,s.get(t),r)){c(t,r),d(s.get(e)+1,s.get(t)-1,r);continue}for(r=-1;f(s.get(e)+1,s.get(t),++r););c(t,r),d(s.get(e)+1,s.get(t)-1,r)}}let p=new Map;for(let e of t)p.set(e,[s.get(e),i.get(e)]);return p}(o)){let n=r.get(t[0]);if(!n)throw Error("no corresponding item of node ".concat(t[0]));let a=e.get(n);if(!a)throw Error("item id ".concat(n," is not present in idToBox"));l.set(a,t[1])}return l}(t),l=new Map,o=new Map,s=0,i=0;for(let t of n){let e=t[0],r=t[1][0],n=t[1][1],c=l.get(r)||0;e.width>c&&l.set(r,e.width);let d=o.get(n)||0;e.height>d&&o.set(n,e.height),s=a()([r,s])||0,i=a()([n,i])||0}let c=new Map,d=new Map,u=(t,e,r,n)=>{let a=r.get(t);if(a)return a;if(0===t)a=0;else{let l=n.get(t-1);if(!l)throw Error("".concat(t-1," has no result"));a=u(t-1,e,r,n)+l+e}return r.set(t,a),a};for(let t=0;t<=s;++t)u(t,e,c,l);for(let t=0;t<=i;++t)u(t,r,d,o);let f=[];for(let[t,[e,r]]of n){let n=c.get(e),a=d.get(r);if(void 0!==n&&void 0!==a)f.push({x:n,y:a,...t});else throw Error("x of layer ".concat(e,": ").concat(n,", y of row ").concat(r,": ").concat(a," "))}return f}function o(t,e,r,n){return l(t,r,e).map(t=>{let{x:e,y:r,...a}=t;return{x:e+n,y:r+n,...a}}).map(t=>{let{x:e,y:r,...n}=t;return{x:r,y:e,...n}})}function s(t){let e=[],r=new Map;for(let e of t)r.set(e.id,e);for(let n of t)for(let t of n.parentIds){let a=r.get(t);e.push({points:[{x:n.x,y:n.y},{x:a.x,y:a.y}],source:n.id,target:t})}return e}function i(t){let e=[],r=new Map;for(let e of t)r.set(e.id,e);for(let n of t){for(let t of n.parentIds){let a=r.get(t);e.push({points:[{x:n.x+n.width/2,y:n.y+n.height/2},{x:a.x+a.width/2,y:a.y+a.height/2}],source:n.id,target:t})}for(let t of n.externalParentIds)e.push({points:[{x:n.x,y:n.y+n.height/2},{x:n.x+100,y:n.y+n.height/2}],source:n.id,target:t})}return e}},84240:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return R}});var n=r(85893),a=r(40639),l=r(83234),o=r(20979),s=r(57026),i=r(47741),c=r(79855),d=r(97098),u=r(96486),f=r.n(u),p=r(9008),g=r.n(p),h=r(95100),m=r(67294),x=r(52189),y=r(50361),v=r.n(y);function w(t){let{fragmentDependency:e,svgWidth:r,selectedId:a,onSelectedIdChange:l}=t,o=(0,m.useRef)(null),[s,i]=(0,m.useState)("0px"),u=(0,m.useCallback)(()=>{let t=(0,d.zx)().nodeSize([10,34,5]),r=v()(e),{width:n,height:a}=t(r);return{width:n,height:a,dag:r}},[e])();return(0,m.useEffect)(()=>{let{width:t,height:e,dag:n}=u,s=o.current,d=c.Ys(s),f=c.ak_,p=c.jvg().curve(f).x(t=>{let{x:e}=t;return e+10}).y(t=>{let{y:e}=t;return e}),g=t=>t.data.id===a,h=d.select(".edges").selectAll(".edge").data(n.links()),m=t=>t.attr("d",t=>{let{points:e}=t;return p(e)}).attr("fill","none").attr("stroke-width",t=>g(t.source)||g(t.target)?2:1).attr("stroke",t=>g(t.source)||g(t.target)?x.rS.colors.blue["500"]:x.rS.colors.gray["300"]);h.exit().remove(),h.enter().call(t=>t.append("path").attr("class","edge").call(m)),h.call(m);let y=d.select(".nodes").selectAll(".node").data(n.descendants()),v=t=>t.attr("transform",t=>"translate(".concat(t.x+10,", ").concat(t.y,")")).attr("fill",t=>g(t)?x.rS.colors.blue["500"]:x.rS.colors.gray["500"]);y.exit().remove(),y.enter().call(t=>t.append("circle").attr("class","node").attr("r",5).call(v)),y.call(v);let w=d.select(".labels").selectAll(".label").data(n.descendants()),I=t=>t.text(t=>t.data.name).attr("x",r-10).attr("font-family","inherit").attr("text-anchor","end").attr("alignment-baseline","middle").attr("y",t=>t.y).attr("fill",t=>g(t)?x.rS.colors.black["500"]:x.rS.colors.gray["500"]).attr("font-weight","600");w.exit().remove(),w.enter().call(t=>t.append("text").attr("class","label").call(I)),w.call(I);let j=d.select(".overlays").selectAll(".overlay").data(n.descendants()),k=t=>t.attr("x",3).attr("height",24).attr("width",r-6).attr("y",t=>t.y-5-12+2+3).attr("rx",5).attr("fill",x.rS.colors.gray["500"]).attr("opacity",0).style("cursor","pointer");j.exit().remove(),j.enter().call(t=>t.append("rect").attr("class","overlay").call(k).on("mouseover",function(t,e){c.Ys(this).transition().duration(parseInt(x.rS.transition.duration.normal)).attr("opacity",".10")}).on("mouseout",function(t,e){c.Ys(this).transition().duration(parseInt(x.rS.transition.duration.normal)).attr("opacity","0")}).on("mousedown",function(t,e){c.Ys(this).transition().duration(parseInt(x.rS.transition.duration.normal)).attr("opacity",".20")}).on("mouseup",function(t,e){c.Ys(this).transition().duration(parseInt(x.rS.transition.duration.normal)).attr("opacity",".10")}).on("click",function(t,e){l&&l(e.data.id)})),j.call(k),i("".concat(e,"px"))},[e,a,r,l,u]),(0,n.jsxs)("svg",{ref:o,width:"".concat(r,"px"),height:s,children:[(0,n.jsx)("g",{className:"edges"}),(0,n.jsx)("g",{className:"nodes"}),(0,n.jsx)("g",{className:"labels"}),(0,n.jsx)("g",{className:"overlays"})]})}var I=r(39653),j=r(79351),k=r(98032),S=r(63679),b=r(53911);let E=(0,S.ZP)(()=>r.e(171).then(r.t.bind(r,55171,23)));function M(t){let{planNodeDependencies:e,fragmentDependency:r,selectedFragmentId:a,backPressures:l}=t,o=(0,m.useRef)(null),{isOpen:s,onOpen:d,onClose:u}=(0,I.qY)(),[f,p]=(0,m.useState)(),g=(0,m.useCallback)(t=>{p(t),d()},[d,p]),{svgWidth:h,svgHeight:y,edges:w,layoutResult:S,includedFragmentIds:M}=(0,m.useCallback)(()=>{let t=v()(e),n=v()(r),a=new Map,l=new Set;for(let[e,r]of t){var o;let t=function(t,e){let{dx:r,dy:n}=e,a=c.G_s().nodeSize([n,r])(t);return a.each(t=>([t.x,t.y]=[t.y,t.x])),a.each(t=>t.x=-t.x),a}(r,{dx:72,dy:48}),{width:n,height:s}=function(t,e){let{margin:{top:r,bottom:n,left:a,right:l}}=e,o=1/0,s=-1/0,i=1/0,c=-1/0;return t.each(t=>s=t.x>s?t.x:s),t.each(t=>o=t.x<o?t.x:o),t.each(t=>c=t.y>c?t.y:c),t.each(t=>i=t.y<i?t.y:i),o-=a,s+=l,i-=r,c+=n,t.each(t=>t.x=t.x-o),t.each(t=>t.y=t.y-i),{width:s-o,height:c-i}}(t,{margin:{left:72,right:72,top:60,bottom:72}});a.set(e,{layoutRoot:t,width:n,height:s,actorIds:null!==(o=r.data.actorIds)&&void 0!==o?o:[]}),l.add(e)}let s=(0,b.A8)(n.map(t=>{let{width:e,height:r,id:n,...l}=t,{width:o,height:s}=a.get(n);return{width:o,height:s,id:n,...l}}),24,24),i=new Map;s.forEach(t=>{let{id:e,x:r,y:n}=t;i.set(e,{x:r,y:n})});let d=[];for(let[t,e]of a){let{x:r,y:n}=i.get(t);d.push({id:t,x:r,y:n,...e})}let u=0,f=0;d.forEach(t=>{let{x:e,y:r,width:n,height:a}=t;f=Math.max(f,r+a+50),u=Math.max(u,e+n)});let p=(0,b.jI)(s);return{layoutResult:d,svgWidth:u,svgHeight:f,edges:p,includedFragmentIds:l}},[e,r])();return(0,m.useEffect)(()=>{if(S){let t=o.current,e=c.Ys(t),r=c.h5h().x(t=>t.x).y(t=>t.y),n=t=>t===a,s=t=>{t.attr("transform",t=>{let{x:e,y:r}=t;return"translate(".concat(e,", ").concat(r,")")});let e=t.select(".text-frag-id");e.empty()&&(e=t.append("text").attr("class","text-frag-id")),e.attr("fill","black").text(t=>{let{id:e}=t;return"Fragment ".concat(e)}).attr("font-family","inherit").attr("text-anchor","end").attr("dy",t=>{let{height:e}=t;return e-24+12}).attr("dx",t=>{let{width:e}=t;return e-24}).attr("fill","black").attr("font-size",12);let a=t.select(".text-actor-id");a.empty()&&(a=t.append("text").attr("class","text-actor-id")),a.attr("fill","black").text(t=>{let{actorIds:e}=t;return"Actor ".concat(e.join(", "))}).attr("font-family","inherit").attr("text-anchor","end").attr("dy",t=>{let{height:e}=t;return e-24+24}).attr("dx",t=>{let{width:e}=t;return e-24}).attr("fill","black").attr("font-size",12);let l=t.select(".bounding-box");l.empty()&&(l=t.append("rect").attr("class","bounding-box")),l.attr("width",t=>{let{width:e}=t;return e-48}).attr("height",t=>{let{height:e}=t;return e-48}).attr("x",24).attr("y",24).attr("fill","white").attr("stroke-width",t=>{let{id:e}=t;return n(e)?3:1}).attr("rx",5).attr("stroke",t=>{let{id:e}=t;return n(e)?x.rS.colors.blue[500]:x.rS.colors.gray[500]});let o=t.select(".edges");o.empty()&&(o=t.append("g").attr("class","edges"));let s=t=>t.attr("d",r),i=o.selectAll("path").data(t=>{let{layoutRoot:e}=t;return e.links()});i.enter().call(t=>(t.append("path").attr("fill","none").attr("stroke",x.rS.colors.gray[700]).attr("stroke-width",1.5).call(s),t)),i.call(s),i.exit().remove();let c=t.select(".nodes");c.empty()&&(c=t.append("g").attr("class","nodes"));let d=t=>{t.attr("transform",t=>"translate(".concat(t.x,",").concat(t.y,")"));let e=t.select("circle");e.empty()&&(e=t.append("circle")),e.attr("fill",x.rS.colors.blue[500]).attr("r",12).style("cursor","pointer").on("click",(t,e)=>g(e.data));let r=t.select("text");r.empty()&&(r=t.append("text")),r.attr("fill","black").text(t=>t.data.name).attr("font-family","inherit").attr("text-anchor","middle").attr("dy",21.6).attr("fill","black").attr("font-size",12).attr("transform","rotate(-8)");let n=t.select("title");return n.empty()&&(n=t.append("title")),n.text(t=>{var e;return null!==(e=t.data.node.identity)&&void 0!==e?e:t.data.name}),t},u=c.selectAll(".stream-node").data(t=>{let{layoutRoot:e}=t;return e.descendants()});u.exit().remove(),u.enter().call(t=>t.append("g").attr("class","stream-node").call(d)),u.call(d)},i=e.select(".fragments").selectAll(".fragment").data(S);i.enter().call(t=>t.append("g").attr("class","fragment").call(s)),i.call(s),i.exit().remove();let d=e.select(".fragment-edges").selectAll(".fragment-edge").data(w),u=c.FdL,f=c.jvg().curve(u).x(t=>{let{x:e}=t;return e}).y(t=>{let{y:e}=t;return e}),p=t=>{let e=t.select("path");e.empty()&&(e=t.append("path"));let r=t=>n(t.source)||n(t.target);e.attr("d",t=>{let{points:e}=t;return f(e)}).attr("fill","none").attr("stroke-width",t=>{if(l){let r=l.get("".concat(t.target,"_").concat(t.source));if(r){var e;return Math.min(Math.max(r,0),100)/100*30+2}}return r(t)?4:2}).attr("stroke",t=>{if(l){let e=l.get("".concat(t.target,"_").concat(t.source));if(e)return function(t){let e=[x.rS.colors.green["100"],x.rS.colors.green["300"],x.rS.colors.yellow["400"],x.rS.colors.orange["500"],x.rS.colors.red["700"]].map(t=>(0,k.H)(t)),r=(t=Math.min(t=Math.max(t,0),100))/100*(e.length-1),n=Math.floor(r);return(0,k.H)(e[n]).mix((0,k.H)(e[Math.ceil(r)]),(r-n)*100).toHexString()}(e)}return r(t)?x.rS.colors.blue["500"]:x.rS.colors.gray["300"]});let a=t.select("title");return a.empty()&&(a=t.append("title")),a.text(t=>{if(l){let e=l.get("".concat(t.target,"_").concat(t.source));if(e)return"".concat(e.toFixed(2),"%")}return""}),t};d.enter().call(t=>t.append("g").attr("class","fragment-edge").call(p)),d.call(p),d.exit().remove()}},[S,w,l,a,g]),(0,n.jsxs)(m.Fragment,{children:[(0,n.jsxs)(j.u_,{isOpen:s,onClose:u,size:"5xl",children:[(0,n.jsx)(j.ZA,{}),(0,n.jsxs)(j.hz,{children:[(0,n.jsxs)(j.xB,{children:[null==f?void 0:f.operatorId," - ",null==f?void 0:f.name]}),(0,n.jsx)(j.ol,{}),(0,n.jsx)(j.fe,{children:s&&(null==f?void 0:f.node)&&(0,n.jsx)(E,{shouldCollapse:t=>{let{name:e}=t;return"input"===e||"fields"===e||"streamKey"===e},src:f.node,collapsed:3,name:null,displayDataTypes:!1})}),(0,n.jsx)(j.mz,{children:(0,n.jsx)(i.zx,{colorScheme:"blue",mr:3,onClick:u,children:"Close"})})]})]}),(0,n.jsxs)("svg",{ref:o,width:"".concat(h,"px"),height:"".concat(y,"px"),children:[(0,n.jsx)("g",{className:"fragment-edges"}),(0,n.jsx)("g",{className:"fragments"})]})]})}var N=r(64030),_=r(61642),C=r(44599),D=r(68905),A=r(35862);async function P(){return await A.ZP.get("/metrics/fragment/prometheus_back_pressures")}function B(t){let e=new Map,r=new Map,n=new Map;for(let n of t){let t="".concat(n.fragmentId,"-").concat(n.downstreamFragmentId);e.set(t,(e.get(t)||0)+n.value),r.set(t,(r.get(t)||0)+n.actorCount)}for(let[t,a]of e)n.set(t,a/r.get(t));return n}async function F(){var t,e;return null!==(e=null===(t=(await A.ZP.get("/metrics/fragment/embedded_back_pressures")).backPressureInfos)||void 0===t?void 0:t.map(D.hL.fromJSON))&&void 0!==e?e:[]}var z=r(33256);function R(){var t,e,r;let{response:u}=(0,C.Z)(z.gG),{response:p}=(0,C.Z)(z.KY),[x,y]=(0,h.v1)("id",h.U),[v,I]=(0,m.useState)(),[j,k]=(0,m.useState)(),S=(0,_.Z)();(0,m.useEffect)(()=>{x&&(k(void 0),(0,z.Dx)(x).then(t=>{k(t)}))},[x]);let b=(0,m.useCallback)(()=>{if(j){let t=function(t){let e=[],r=new Map;for(let e in t.fragments)for(let n of t.fragments[e].actors)r.set(n.actorId,n.fragmentId);for(let n in t.fragments){let a=t.fragments[n],l=new Set,o=new Set;for(let t of a.actors)for(let e of t.upstreamActorId){let n=r.get(e);if(n)l.add(n);else for(let e of function(t){let e=new Set,r=t=>{var n;for(let a of((null===(n=t.nodeBody)||void 0===n?void 0:n.$case)==="merge"&&e.add(t.nodeBody.merge),t.input||[]))r(a)};return r(t),Array.from(e)}(t.nodes))o.add(e.upstreamFragmentId)}e.push({id:a.fragmentId.toString(),name:"Fragment ".concat(a.fragmentId),parentIds:Array.from(l).map(t=>t.toString()),externalParentIds:Array.from(o).map(t=>t.toString()),width:0,height:0,order:a.fragmentId,fragment:a})}return e}(j);return{fragments:j,fragmentDep:t,fragmentDepDag:(0,d.lu)()(t)}}},[j]);(0,m.useEffect)(()=>{u&&!x&&u.length>0&&y(u[0].id)},[x,u,y]);let E=null===(t=b())||void 0===t?void 0:t.fragmentDep,D=null===(e=b())||void 0===e?void 0:e.fragmentDepDag,A=null===(r=b())||void 0===r?void 0:r.fragments,R=(0,m.useCallback)(()=>{let t=null==A?void 0:A.fragments;if(t){let e=new Map;for(let r in t){let n=function(t){let e;let r=t.actors[0],n=t=>{var e,r;return{name:(null===(r=t.nodeBody)||void 0===r?void 0:null===(e=r.$case)||void 0===e?void 0:e.toString())||"unknown",children:(t.input||[]).map(n),operatorId:t.operatorId,node:t}};if(r.dispatcher.length>0){let t=f().camelCase(r.dispatcher[0].type.replace(/^DISPATCHER_TYPE_/,""));e=r.dispatcher.length>1?r.dispatcher.every(t=>t.type===r.dispatcher[0].type)?"".concat(t,"Dispatchers"):"multipleDispatchers":"".concat(t,"Dispatcher")}else e="noDispatcher";let a=t.actors.reduce((t,e)=>(t[e.actorId]=e.dispatcher,t),{});return c.bT9({name:e,actorIds:t.actors.map(t=>t.actorId.toString()),children:r.nodes?[n(r.nodes)]:[],operatorId:"dispatcher",node:a})}(t[r]);e.set(r,n)}return e}},[null==A?void 0:A.fragments])(),[Y,Z]=(0,m.useState)(""),[G,T]=(0,m.useState)(""),O=()=>{let t=parseInt(G);if(p){let e=p.map;for(let r in e){let n=e[r].map;for(let e in n)if(parseInt(e)==t){y(parseInt(r)),I(t);return}}}S(Error("Fragment ".concat(t," not found")))},X=()=>{let t=parseInt(Y);if(p){let e=p.map;for(let r in e){let n=e[r].map;for(let e in n)if(n[e].ids.includes(t)){y(parseInt(r)),I(parseInt(e));return}}}S(Error("Actor ".concat(t," not found")))},[H,L]=(0,m.useState)("Embedded"),{response:U}=(0,C.Z)(P,5e3,"Prometheus"===H),[W,J]=(0,m.useState)();(0,m.useEffect)(()=>{if("Embedded"===H){let t=setInterval(()=>{F().then(t=>{console.log(t),J(e=>e?{previous:e.current,current:t,totalBackpressureNs:function(t,e,r){let n=B(t),a=B(e),l=B(r),o=new Map;new Set([...n.keys(),...a.keys(),...l.keys()]).forEach(t=>{let e=n.get(t)||0,r=a.get(t)||0,s=l.get(t)||0;o.set(t,e+(s-r))});let s=[];return o.forEach((t,e)=>{let[r,n]=e.split("-").map(Number);s.push({actorCount:1,fragmentId:r,downstreamFragmentId:n,value:t})}),s}(e.totalBackpressureNs,e.current,t),totalDurationNs:e.totalDurationNs+5e9}:{previous:t,current:t,totalBackpressureNs:[],totalDurationNs:0})},t=>{console.error(t),S(t,"error")})},5e3);return()=>{clearInterval(t)}}},[H,S]);let K=(0,m.useMemo)(()=>{if(U||W){let r=new Map;if("Embedded"===H&&W){var t,e;let n,a;for(let l of(t=W.totalBackpressureNs,e=W.totalDurationNs,n=B(t),a=new Map,n.forEach((t,r)=>{a.set(r,t/e*100)}),function(t){let e={outputBufferBlockingDuration:[]};for(let r of t)e.outputBufferBlockingDuration.push({metric:{actorId:r.actorId.toString(),fragmentId:r.fragmentId.toString(),downstreamFragmentId:r.downstreamFragmentId.toString()},sample:[{timestamp:Date.now(),value:r.backPressureRate}]});return e}(function(t){let e=[];return t.forEach((t,r)=>{let[n,a]=r.split("-").map(Number);e.push({actorId:0,fragmentId:n,downstreamFragmentId:a,backPressureRate:t})}),e}(a))).outputBufferBlockingDuration)r.set("".concat(l.metric.fragmentId,"_").concat(l.metric.downstreamFragmentId),l.sample[0].value)}else if("Prometheus"===H&&U){for(let t of U.outputBufferBlockingDuration)if(t.sample.length>0){let e=100*f()(t.sample).maxBy(t=>t.timestamp).value;r.set("".concat(t.metric.fragment_id,"_").concat(t.metric.downstream_fragment_id),e)}}return r}},[H,U,W]),$=(0,n.jsxs)(a.kC,{p:3,height:"calc(100vh - 20px)",flexDirection:"column",children:[(0,n.jsx)(N.Z,{children:"Fragment Graph"}),(0,n.jsxs)(a.kC,{flexDirection:"row",height:"full",width:"full",children:[(0,n.jsxs)(a.gC,{mr:3,spacing:3,alignItems:"flex-start",width:200,height:"full",children:[(0,n.jsxs)(l.NI,{children:[(0,n.jsx)(l.lX,{children:"Relations"}),(0,n.jsx)(o.II,{list:"relationList",spellCheck:!1,onChange:t=>{var e;let r=null==u?void 0:null===(e=u.find(e=>e.name==t.target.value))||void 0===e?void 0:e.id;r&&y(r)},placeholder:"Search...",mb:2}),(0,n.jsx)("datalist",{id:"relationList",children:u&&u.map(t=>(0,n.jsxs)("option",{value:t.name,children:["(",t.id,") ",t.name]},t.id))}),(0,n.jsx)(s.Ph,{value:null!=x?x:void 0,onChange:t=>y(parseInt(t.target.value)),children:u&&u.map(t=>(0,n.jsxs)("option",{value:t.id,children:["(",t.id,") ",t.name]},t.name))})]}),(0,n.jsxs)(l.NI,{children:[(0,n.jsx)(l.lX,{children:"Goto"}),(0,n.jsxs)(a.gC,{spacing:2,children:[(0,n.jsxs)(a.Ug,{children:[(0,n.jsx)(o.II,{placeholder:"Fragment Id",value:G,onChange:t=>T(t.target.value)}),(0,n.jsx)(i.zx,{onClick:t=>O(),children:"Go"})]}),(0,n.jsxs)(a.Ug,{children:[(0,n.jsx)(o.II,{placeholder:"Actor Id",value:Y,onChange:t=>Z(t.target.value)}),(0,n.jsx)(i.zx,{onClick:t=>X(),children:"Go"})]})]})]}),(0,n.jsxs)(l.NI,{children:[(0,n.jsx)(l.lX,{children:"Back Pressure Data Source"}),(0,n.jsxs)(s.Ph,{value:H,onChange:t=>L(t.target.value),defaultValue:"Embedded",children:[(0,n.jsx)("option",{value:"Embedded",children:"Embedded (5 secs)"},"Embedded"),(0,n.jsx)("option",{value:"Prometheus",children:"Prometheus (1 min)"},"Prometheus")]})]}),(0,n.jsxs)(a.kC,{height:"full",width:"full",flexDirection:"column",children:[(0,n.jsx)(a.xv,{fontWeight:"semibold",children:"Fragments"}),D&&(0,n.jsx)(a.xu,{flex:"1",overflowY:"scroll",children:(0,n.jsx)(w,{svgWidth:200,fragmentDependency:D,onSelectedIdChange:t=>I(parseInt(t)),selectedId:null==v?void 0:v.toString()})})]})]}),(0,n.jsxs)(a.xu,{flex:1,height:"full",ml:3,overflowX:"scroll",overflowY:"scroll",children:[(0,n.jsx)(a.xv,{fontWeight:"semibold",children:"Fragment Graph"}),R&&E&&(0,n.jsx)(M,{selectedFragmentId:null==v?void 0:v.toString(),fragmentDependency:E,planNodeDependencies:R,backPressures:K})]})]})]});return(0,n.jsxs)(m.Fragment,{children:[(0,n.jsx)(g(),{children:(0,n.jsx)("title",{children:"Streaming Fragments"})}),$]})}}},function(t){t.O(0,[662,679,184,667,591,855,653,340,575,721,371,905,888,774,179],function(){return t(t.s=94469)}),_N_E=t.O()}]);